/*!
 * 
 *       Copyright (c) 2019 Kenny Do
 *   
 *       THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *       IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *       FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *       AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *       LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *       OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *       SOFTWARE.
 *   
 *     
 */!function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],u=0,m=[];u<s.length;u++)i=s[u],r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);m.length;)m.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,s=1;s<o.length;s++){var l=o[s];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},r={3:0},a=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([45,0,1]),o()}({45:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),r=n.__importStar(o(1)),a=n.__importStar(o(15)),i=o(4),s=o(8),l=o(3),c=n.__importDefault(o(23)),d=n.__importDefault(o(25)),u=n.__importDefault(o(71));d.default(),function(){n.__awaiter(this,void 0,void 0,function*(){let e=yield s.createUIStore();for(;!e.getState();)yield l.sleep(250),e=yield s.createUIStore();const t=document.createElement("div");document.body.appendChild(t),"Chrome"===browserDetect()&&(yield new Promise(e=>setTimeout(e,100))),a.render(r.createElement(i.Provider,{store:e},r.createElement(c.default,null,r.createElement(u.default,null))),t)})}()},71:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),r=n.__importStar(o(1)),a=o(15),i=o(4),s=o(5),l=o(3),c=n.__importDefault(o(26)),d=n.__importDefault(o(6)),u=n.__importDefault(o(72)),m={buttonStyle:{margin:"4px 4px"}};class p{constructor(){this.tab=void 0,this.storeId="default"}}t.default=i.connect(e=>({contextualIdentities:l.getSetting(e,"contextualIdentities"),state:e}),e=>({onUpdateSetting(t){e(s.updateSetting(t))},onNewExpression(t){e(s.addExpressionUI(t))},onCookieCleanup(t){e(s.cookieCleanupUI(t))}}))(class extends r.Component{constructor(){super(...arguments),this.state=new p,this.cleanButtonContainerRef=null}componentDidMount(){return n.__awaiter(this,void 0,void 0,function*(){const e=yield browser.tabs.query({active:!0,currentWindow:!0});this.setState({storeId:!this.props.contextualIdentities||e[0].cookieStoreId&&"firefox-default"===e[0].cookieStoreId?"default":e[0].cookieStoreId||"default",tab:e[0]})})}animateFlash(e,t){if(e)try{const o=a.findDOMNode(e);o&&(o.classList.add(t?"successAnimated":"failureAnimated"),setTimeout(()=>{o.classList.remove(t?"successAnimated":"failureAnimated")},1500))}catch(e){}}clearCookiesForThisDomain(e){return n.__awaiter(this,void 0,void 0,function*(){const{state:t}=this.props;if(!this.state.tab)return!1;const{cookieStoreId:o}=this.state.tab,n=yield browser.cookies.getAll(l.returnOptionalCookieAPIAttributes(t,{domain:e,firstPartyDomain:e,storeId:o}));return n.length>0&&(n.forEach(e=>browser.cookies.remove(l.returnOptionalCookieAPIAttributes(t,{firstPartyDomain:e.firstPartyDomain,name:e.name,storeId:e.storeId,url:l.prepareCookieDomain(e)}))),!0)})}clearLocalstorageForThisDomain(e){return browser.tabs.executeScript(void 0,{allFrames:!0,code:"window.localStorage.clear();window.sessionStorage.clear();"}),!0}render(){const{tab:e,storeId:t}=this.state;if(!e)return"Loading";const{onNewExpression:o,onCookieCleanup:a,onUpdateSetting:i,contextualIdentities:s,state:p}=this.props,{cache:g,settings:f}=p,b=l.getHostname(e.url),w=l.extractMainDomain(b),x=[b===w?void 0:`*.${w}`,b].filter(Boolean);return""===b||l.isAnIP(e.url)||x.push(`*.${b}`),r.createElement("div",{className:"container-fluid",style:{minWidth:`${"Chrome"===g.browserDetect?"650px":""}`}},r.createElement("div",{className:"row",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",justifyContent:"center",paddingBottom:"8px",paddingTop:"8px"}},r.createElement(d.default,{iconName:"power-off",className:f.activeMode.value?"btn-success":"btn-danger",styleReact:m.buttonStyle,onClick:()=>i(Object.assign({},f.activeMode,{value:!f.activeMode.value})),title:f.activeMode.value?browser.i18n.getMessage("disableAutoDeleteText"):browser.i18n.getMessage("enableAutoDeleteText"),text:f.activeMode.value?browser.i18n.getMessage("autoDeleteEnabledText"):browser.i18n.getMessage("autoDeleteDisabledText")}),r.createElement(d.default,{iconName:f.showNotificationAfterCleanup.value?"bell":"bell-slash",className:f.showNotificationAfterCleanup.value?"btn-success":"btn-danger",styleReact:m.buttonStyle,onClick:()=>i(Object.assign({},f.showNotificationAfterCleanup,{value:!f.showNotificationAfterCleanup.value})),title:browser.i18n.getMessage("toggleNotificationText"),text:f.showNotificationAfterCleanup.value?browser.i18n.getMessage("notificationEnabledText"):browser.i18n.getMessage("notificationDisabledText")}),r.createElement("div",{className:"btn-group",ref:e=>{this.cleanButtonContainerRef=e},style:{margin:"0 4px"}},r.createElement(d.default,{iconName:"eraser",className:"btn-warning",onClick:()=>{a({greyCleanup:!1,ignoreOpenTabs:!1}),this.animateFlash(this.cleanButtonContainerRef,!0)},title:browser.i18n.getMessage("cookieCleanupText"),text:browser.i18n.getMessage("cleanText")}),r.createElement("div",{className:"dropdown"},r.createElement("button",{className:"btn btn-warning dropdown-toggle dropdown-toggle-split","data-toggle":"dropdown","data-disabled":"true",style:{transform:"translate3d(-3px, 0px, 0px)"}}),r.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.createElement("a",{className:"dropdown-item",href:"#",onClick:()=>{a({greyCleanup:!1,ignoreOpenTabs:!0}),this.animateFlash(this.cleanButtonContainerRef,!0)},title:browser.i18n.getMessage("cookieCleanupIgnoreOpenTabsText")},browser.i18n.getMessage("cleanIgnoringOpenTabsText")),r.createElement("a",{className:"dropdown-item",href:"#",onClick:()=>n.__awaiter(this,void 0,void 0,function*(){const e=yield this.clearCookiesForThisDomain(b);this.animateFlash(this.cleanButtonContainerRef,e)}),title:browser.i18n.getMessage("clearSiteDataForDomainText",["cookies",b])},browser.i18n.getMessage("clearSiteDataText",["cookies"])),r.createElement("a",{className:"dropdown-item",href:"#",onClick:()=>n.__awaiter(this,void 0,void 0,function*(){const e=yield this.clearLocalstorageForThisDomain(b);this.animateFlash(this.cleanButtonContainerRef,e)}),title:browser.i18n.getMessage("clearSiteDataForDomainText",["localstorage",b])},browser.i18n.getMessage("clearSiteDataText",["localstorage"]))))),r.createElement(d.default,{iconName:"cog",className:"btn-info",styleReact:m.buttonStyle,onClick:()=>{browser.tabs.create({url:"/settings/settings.html#tabSettings"}),window.close()},title:browser.i18n.getMessage("preferencesText"),text:browser.i18n.getMessage("preferencesText")})),r.createElement("div",{className:"row",style:{alignItems:"center",margin:"8px 0"}},e.favIconUrl&&r.createElement("img",{src:e.favIconUrl,style:{height:"20px",marginRight:"7px",verticalAlign:"middle",width:"20px"}}),r.createElement("span",{style:{fontSize:"20px",marginRight:"8px",verticalAlign:"middle"}},s?`${b} ${void 0!==g[t]?`(${g[t]})`:""}`:`${b}`)),x.map(e=>r.createElement("div",{key:e,style:{alignItems:"center",display:"flex",margin:"8px 0"},className:"row"},r.createElement("div",{style:{flex:1}},e),r.createElement("div",{className:"btn-group",style:{marginLeft:"8px"}},r.createElement(d.default,{className:"btn-secondary",onClick:()=>{o({expression:e,listType:"GREY",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toGreyListText"),text:browser.i18n.getMessage("greyListWordText")}),r.createElement(d.default,{className:"btn-primary",onClick:()=>{o({expression:e,listType:"WHITE",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toWhiteListText"),text:browser.i18n.getMessage("whiteListWordText")})))),r.createElement("div",{className:"row",style:{margin:"8px 0"}},r.createElement(u.default,{url:b,storeId:t})),r.createElement(c.default,{numberToShow:3,decisionFilter:1}))}})},72:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),r=n.__importStar(o(1)),a=o(4),i=o(3),s=n.__importDefault(o(27)),l=(e,t)=>{const o=((e,t)=>void 0===e.lists[t.storeId]?[]:e.lists[t.storeId])(e,t),n=t.url;return o.filter(e=>new RegExp(i.globExpressionToRegExp(e.expression)).test(n))};t.default=a.connect((e,t)=>({expressions:l(e,t)}))(e=>{const{expressions:t,storeId:o}=e;return r.createElement(s.default,{expressionColumnTitle:browser.i18n.getMessage("matchedDomainExpressionText"),expressions:t,storeId:o,emptyElement:r.createElement("span",{style:{fontStyle:"italic",width:"100%"}},r.createElement("div",{className:"alert alert-primary",role:"alert",style:{marginBottom:0}},r.createElement("i",null,browser.i18n.getMessage("noRulesText"))))})})},8:function(e,t){e.exports=ReduxWebExt}});